# Review Iteration 1 — 2026-02-15 18:07

## Источник

- Design: `docs/plans/2026-02-15-yolo26-migration-design.md`
- Plan: `docs/plans/2026-02-15-yolo26-migration-plan.md`
- Review agents: codex-executor (gpt-5.3-codex), gemini-executor, ccs-executor (glmt)
- Merged output: `docs/plans/2026-02-15-yolo26-migration-review-merged-iter-1.md`

## Замечания

### CRITICAL-1: Отсутствие реального smoke-теста с YOLO26

> Все три агента указали, что mock-тесты не проверяют реальную загрузку и инференс YOLO26. Нет гарантии, что ultralytics 8.4.x совместим с PyTorch/CUDA в Docker-образах.

**Источник:** Codex, Gemini, CCS
**Статус:** Новое
**Ответ:** Нет, out of scope. Минимальная миграция как решено. Smoke-тест — отдельная задача.
**Действие:** Без изменений в документах.

---

### CRITICAL-2: Docker — PyTorch не зафиксирован, сборка невоспроизводима

> PyTorch устанавливается без фиксации версии в Dockerfile. ultralytics ограничен диапазоном. Может быть установлена несовместимая комбинация.

**Источник:** Codex, Gemini, CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — pre-existing issue, не вводится этой миграцией.
**Действие:** Без изменений.

---

### CRITICAL-3: «Full cutover» не реализован в коде

> Codex указал, что можно запросить любую модель через API, менеджер загрузит её динамически. Валидация не проверяет семейство моделей.

**Источник:** Codex
**Статус:** Новое
**Ответ:** Ложное срабатывание — динамическая загрузка любых моделей by design. Cutover = смена дефолтов и документации, не блокирование старых моделей.
**Действие:** Без изменений.

---

### CRITICAL-4: Grep-критерий в плане некорректен

> План ожидает, что yolo11 останется только в design.md, но plan.md и другие файлы в docs/plans/ тоже содержат yolo11 по смыслу миграции.

**Источник:** Codex
**Статус:** Новое
**Ответ:** Справедливо. Исправить grep с --exclude-dir=docs/plans/.
**Действие:** Обновлён Task 6 Step 1 в плане — добавлен `--exclude-dir="docs/plans"`, обновлён Expected.

---

### CRITICAL-5: NMS-free inference может изменить формат/количество детекций

> CCS и Gemini указали, что NMS-free архитектура может изменить поведение predict().

**Источник:** CCS, Gemini
**Статус:** Новое
**Ответ:** Ложное срабатывание — ultralytics обрабатывает NMS-free прозрачно, формат predict() идентичен (подтверждено в API compatibility table дизайна).
**Действие:** Без изменений.

---

### CRITICAL-6: Нет плана отката (rollback)

> CCS указал отсутствие документированных шагов rollback.

**Источник:** CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — для text + version bump откат = git revert.
**Действие:** Без изменений.

---

### CONCERN-1: Model weights volume mount в Docker

> Нет volume-mount для весов моделей, скачиваются заново при каждом рестарте.

**Источник:** Gemini, CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — pre-existing issue, не связано с миграцией.
**Действие:** Без изменений.

---

### CONCERN-2: COCO class names/IDs могут отличаться

> CCS указал, что class names/IDs могут быть другими в YOLO26.

**Источник:** CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — YOLO26 использует тот же COCO80 набор.
**Действие:** Без изменений.

---

### CONCERN-3: Нет сравнения производительности

> Нет бенчмарков YOLO11 vs YOLO26.

**Источник:** Gemini, CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — out of scope, миграция не про бенчмарки.
**Действие:** Без изменений.

---

### SUGGESTION-1: Фазовая миграция вместо big-bang

> CCS предложил поэтапную миграцию: optional -> A/B -> default -> remove.

**Источник:** CCS
**Статус:** Новое
**Ответ:** Ложное срабатывание — явно отклонено в сессии (rejected alternatives).
**Действие:** Без изменений.

---

### CONCERN-4: ultralytics version range слишком широк

> Codex указал, что диапазон допускает непроверенные патчи.

**Источник:** Codex
**Статус:** Новое
**Ответ:** Ложное срабатывание — осознанный выбор, стандартная практика.
**Действие:** Без изменений.

---

### CONCERN-5: pytest команды не универсальны

> Codex указал, что `python -m pytest` может не работать в текущей среде.

**Источник:** Codex
**Статус:** Новое
**Ответ:** Спорно, но план предполагает dev-окружение с requirements-dev.txt.
**Действие:** Без изменений.

## Изменения в документах

| Файл | Изменение |
|------|-----------|
| `docs/plans/2026-02-15-yolo26-migration-plan.md` | Task 6 Step 1: добавлен `--exclude-dir="docs/plans"` в grep, обновлён Expected |

## Статистика

- Всего замечаний: 12
- Новых: 12
- Повторов (автоответ): 0
- Пользователь сказал "стоп": Нет
- Агенты: codex-executor, gemini-executor, ccs-executor
